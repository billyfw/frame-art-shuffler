remove_tv:
  name: Remove TV
  description: Remove a TV from the Frame Art Shuffler integration
  fields:
    device_id:
      name: Device
      description: The TV device to remove
      required: true
      selector:
        device:
          integration: frame_art_shuffler

display_image:
  name: Display Image
  description: Upload and display a specific image on a Frame TV
  fields:
    device_id:
      name: Device
      description: The TV device to display the image on. Required if entity_id is not provided.
      required: false
      selector:
        device:
          integration: frame_art_shuffler
    entity_id:
      name: Entity
      description: The entity ID of the TV (e.g. media_player.frame_tv). Required if device_id is not provided.
      required: false
      selector:
        entity:
          integration: frame_art_shuffler
    image_path:
      name: Image Path
      description: Full local path to the image file. Required if image_url or filename are not provided.
      required: false
      selector:
        text:
    image_url:
      name: Image URL
      description: Local URL to the image (e.g. /local/my_art.jpg).
      required: false
      selector:
        text:
    filename:
      name: Filename
      description: Filename of the image relative to the library folder.
      required: false
      selector:
        text:
    matte:
      name: Matte
      description: Matte ID (e.g. modern_matte)
      required: false
      selector:
        text:
    filter:
      name: Filter
      description: Filter ID
      required: false
      selector:
        text:

set_log_options:
  name: Configure Display Logging
  description: Update the shared display log settings used by the Frame Art Manager dashboard.
  fields:
    logging_enabled:
      name: Enable logging
      description: Turn logging on or off without deleting existing files.
      required: false
      selector:
        boolean:
    log_retention_months:
      name: Retention window (months)
      description: Keep raw display sessions for this many months (1-12, defaults to 6).
      required: false
      selector:
        number:
          min: 1
          max: 12
          mode: slider
    log_flush_interval_minutes:
      name: Flush interval (minutes)
      description: How often queued sessions are flushed to disk (1-60, defaults to 5).
      required: false
      selector:
        number:
          min: 1
          max: 60
          mode: slider

flush_display_log:
  name: Flush Display Log
  description: Manually flush any pending display sessions to disk. Useful for testing or ensuring data is written before a restart.

clear_display_log:
  name: Clear Display Log
  description: Permanently delete all display log data including events, summary, and pending sessions. This action cannot be undone.

turn_on_tv:
  name: Turn On TV
  description: Turn on a Frame TV and switch to art mode. Supports an optional reason for activity logging.
  fields:
    device_id:
      name: Device
      description: The TV device to turn on. Required if entity_id is not provided.
      required: false
      selector:
        device:
          integration: frame_art_shuffler
    entity_id:
      name: Entity
      description: The entity ID of the TV. Required if device_id is not provided.
      required: false
      selector:
        entity:
          integration: frame_art_shuffler
    reason:
      name: Reason
      description: Optional reason for turning on (e.g., "Billy arrived home"). Appears in activity log.
      required: false
      selector:
        text:

turn_off_tv:
  name: Turn Off TV
  description: Turn off a Frame TV screen (stays in art mode). Supports an optional reason for activity logging.
  fields:
    device_id:
      name: Device
      description: The TV device to turn off. Required if entity_id is not provided.
      required: false
      selector:
        device:
          integration: frame_art_shuffler
    entity_id:
      name: Entity
      description: The entity ID of the TV. Required if device_id is not provided.
      required: false
      selector:
        entity:
          integration: frame_art_shuffler
    reason:
      name: Reason
      description: Optional reason for turning off (e.g., "Billy left home"). Appears in activity log.
      required: false
      selector:
        text:

# Tagset Services
upsert_tagset:
  name: Create/Update Tagset
  description: Create a new global tagset or update an existing one. Tagsets are shared across all TVs. To rename, provide original_name with the old name.
  fields:
    name:
      name: Tagset Name
      description: Name for the tagset (e.g., "everyday", "holidays", "billybirthday").
      required: true
      selector:
        text:
    original_name:
      name: Original Name (for rename)
      description: If renaming, provide the original tagset name here. TVs using the old name will be updated.
      required: false
      selector:
        text:
    tags:
      name: Include Tags
      description: List of tags to include when this tagset is active.
      required: true
      selector:
        object:
    exclude_tags:
      name: Exclude Tags
      description: List of tags to exclude when this tagset is active.
      required: false
      selector:
        object:
    weighting_type:
      name: Weighting Type
      description: "How images are weighted during shuffle. 'image' = all images equally likely (default). 'tag' = tags weighted equally (or by tag_weights), then random image from selected tag."
      required: false
      default: "image"
      selector:
        select:
          options:
            - "image"
            - "tag"
    tag_weights:
      name: Tag Weights
      description: "Optional weights for tags (only used when weighting_type is 'tag'). Object mapping tag names to weights (0.1-10). Missing tags default to 1."
      required: false
      selector:
        object:

delete_tagset:
  name: Delete Tagset
  description: Delete a global tagset. Cannot delete a tagset that is selected or has an active override on any TV.
  fields:
    name:
      name: Tagset Name
      description: Name of the tagset to delete.
      required: true
      selector:
        text:

select_tagset:
  name: Select Tagset
  description: Permanently switch which tagset a TV uses for shuffling.
  fields:
    device_id:
      name: Device
      description: The TV device. Required if entity_id is not provided.
      required: false
      selector:
        device:
          integration: frame_art_shuffler
    entity_id:
      name: Entity
      description: The entity ID of the TV. Required if device_id is not provided.
      required: false
      selector:
        entity:
          integration: frame_art_shuffler
    name:
      name: Tagset Name
      description: Name of the tagset to select.
      required: true
      selector:
        text:

override_tagset:
  name: Override Tagset
  description: Temporarily override the selected tagset for a specified duration.
  fields:
    device_id:
      name: Device
      description: The TV device. Required if entity_id is not provided.
      required: false
      selector:
        device:
          integration: frame_art_shuffler
    entity_id:
      name: Entity
      description: The entity ID of the TV. Required if device_id is not provided.
      required: false
      selector:
        entity:
          integration: frame_art_shuffler
    name:
      name: Tagset Name
      description: Name of the tagset to temporarily activate.
      required: true
      selector:
        text:
    duration_minutes:
      name: Duration (minutes)
      description: How long the override should last before reverting to the selected tagset.
      required: true
      selector:
        number:
          min: 1
          max: 10080
          unit_of_measurement: minutes
          mode: box

clear_tagset_override:
  name: Clear Tagset Override
  description: Clear an active tagset override, reverting to the selected tagset immediately.
  fields:
    device_id:
      name: Device
      description: The TV device. Required if entity_id is not provided.
      required: false
      selector:
        device:
          integration: frame_art_shuffler
    entity_id:
      name: Entity
      description: The entity ID of the TV. Required if device_id is not provided.
      required: false
      selector:
        entity:
          integration: frame_art_shuffler

set_recency_windows:
  name: Set Recency Windows
  description: Configure the recency time windows used by the shuffle algorithm to deprioritize recently shown images.
  fields:
    same_tv_hours:
      name: Same-TV Window (hours)
      description: Images shown on the same TV within this window are deprioritized. Range 6-168 (1 week).
      required: false
      selector:
        number:
          min: 6
          max: 168
          unit_of_measurement: hours
          mode: slider
    cross_tv_hours:
      name: Cross-TV Window (hours)
      description: Images shown on any TV within this window are deprioritized. Range 6-168 (1 week).
      required: false
      selector:
        number:
          min: 6
          max: 168
          unit_of_measurement: hours
          mode: slider
